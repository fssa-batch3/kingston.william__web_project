<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../assets/css/hospital_registration.css">
    <title>Document</title>
  </head>

  <body>
    <div class="cont1">

          <h2>Hospital Registration</h2>
          <form  id="registration_form"> 
            <div class="input_fields">      

          <span class="input-field">
            <label for="hospital_name">Hospital Name</label>
            <input type="text" id="hospital_name" required />
          </span>

          <span class="input-field">
            <label for="district">District</label>
            <input type="text" pattern="[A-Za-z]{2,32}" id="district" required />
          </span>

          <span class="input-field">
            <label for="hospital_address">Address</label>
            <input type="text" id="hospital_address" required />
          </span>

          <span class="input-field">
            <label for="pincode">Area Pincode</label>
            <input type="number" pattern="[0-9]{10}" id="pincode" required />
          </span>

          <span class="input-field">
            <label for="tel_num">Contact No</label>
            <input type="text"  pattern="[0-9]{10}" id="tel_num" required />
          </span>

          <span class="input-field">
            <label for="gmail">Gmail</label>
            <input type="email" id="gmail" required />
          </span>
        </div>
        <div class="input_fields">

    


          <span class="input-field">
            <label for="hosp_license">Hospital License</label>
            <input type="text" id="hosp_license" required/>
          </span>

          
          <span class="input-field">
            <label for="hospital_renew">Hospital Renewed Year</label>
            <input type="date" id="hospital_renew" required/>
          </span>
                 
          <span class="input-field">
          <label for="Hospital Type">Hospital Type</label>
          <input type="text" id="Hospital Type" required/>
        </span>

        <span class="input-field">
          <label for="password">Password</label>
          <input type="text" id="password" required/>
        </span>

        <span class="input-field">
          <label for="confirm_pass">Confirm Password</label>
          <input type="text" id="con_password" required/>
        </span>

       

        
        </div>
        <div class="input_fields">
          <span class="input-field">
            <label for="blood_group_avail">  Blood Group Availability</label>  
            <p>1.</p> 
          <input type="text" id="blood_group_avail" class="blood_group_avail" required/>
          <input type="number"  pattern="[0-9]{10}" id="blood_stock_avail" class="blood_stock_avail" required/>
        </span>
        <span class="input-field">
          <p>2.</p>
          <input type="text" id="blood_group_avail" class="blood_group_avail" required/>
          <input type="number" pattern="[0-9]{10}" id="blood_stock_avail" class="blood_stock_avail" required/>
        </span>

          <!-- <button>Add a Blood group</button> -->
       

        </div>

            

          <!-- </div>-->
          <div class="add_img">
            <img src="../assets/img/profile_img.png" alt="img" id="changed_photo">
            <input type="file" id="add_image_button">
          </div>
          <button type="submit" class="raised-button ">Submit</button>
        </form>

    </div>
    <script>
        // hospital_name
        // district  hospital_address  pincode tel_num gmail blood_group_avail blood_stock_avail hosp_license  hospital_renew  add_img
        let registration_form = document.getElementById("registration_form")

        registration_form.addEventListener("submit",e=>{
            e.preventDefault()


            let hospital_name = document.getElementById("hospital_name").value
        let district = document.getElementById("district").value
        let hospital_address = document.getElementById("hospital_address").value
        let pincode = document.getElementById("pincode").value
        let tel_num = document.getElementById("tel_num").value
        let blood_group_avail = document.querySelectorAll(".blood_group_avail")
        let blood_stock_avail = document.querySelectorAll(".blood_stock_avail")
        let hosp_license = document.getElementById("hosp_license").value
        let hospital_renew = document.getElementById("hospital_renew").value
        let add_image_button =document.getElementById("add_image_button").value
        let changed_photo= document.getElementById("changed_photo").value
        let gmail= document.getElementById("gmail").value
        let password =document.getElementById("password").value
        let con_password =document.getElementById("con_password").value


if(password==con_password){
  let total_blood_avail = []
        for(let i = 0;i<blood_group_avail.length;i++){
            let blood_avail ={
            "blood_group_avail":blood_group_avail[i].value,
            "blood_stock_avail":blood_stock_avail[i].value
        }
        total_blood_avail.push(blood_avail)
        }

        let hospital_detail =  JSON.parse(localStorage.getItem("hospital_details"))?? [] //localStorage.getItem("hospital_detail")? JSON.parse(localStorage.getItem("hospital_detail")):


        let hospital_data = {
            "hospital_name":hospital_name,
            "district":district,
            "hospital_address":hospital_address,
            "pincode":pincode,
            "tel_num":tel_num,
            "total_blood_avail":total_blood_avail,
            "hosp_license":hosp_license,
            "hospital_renew":hospital_renew,
            gmail,
            password
        }
        localStorage.setItem("active_hospital",gmail)
        hospital_detail.push(hospital_data)
        localStorage.setItem("hospital_details",JSON.stringify(hospital_detail))
        localStorage.setItem("status","hospital")

          window.location.href="./blood_availability.html"

        }
      else{
        alert("password and confirm password doesn't match")
      }})
//try

      
            
     



        
    </script>
  </body>
</html>
