<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title> DONOR </title>
        <link rel="stylesheet" href="../assets/css/registration.css" />
        <title>Registration Form</title>
    </head>
    <body>
        <div class="container">

            <header>Donor Registration</header>
     <!-- <form> -->
        <form  id="signup-form" >
        <div class="form first">
            <div class="details personal">
             
            <div class="fields">
                <div class="input-field">
                    <label>Full Name</label>
                    <input type="text"id="fullname" pattern="[A-Za-z]{2,32}" placeholder="Enter your name" required="true">
                </div>

                <div class="input-field">
                    <label>Date of Birth</label>
                    <input type="date" placeholder="Enter Birth date" required id="dob">
                </div>

                <div class="input-field">
                    <label>Email</label>
                    <input type="email"id="emailid" placeholder="Enter your email" required>
                </div>

                
                    <div class="input-field">
                        <label>Mobile Number</label>
                        <input type="tel"id="phnum" title="Enter only numbers" pattern="[0-9]{10}" placeholder="Enter mobile number" required>
                    </div>

                    <div class="input-field">
                        <label>Gender</label>
                        <input type="text"id="gendermf" placeholder="Enter your gender" required>
                    </div>

                    <div class="yesorno">
                        <p>Did you ever donate blood before?</p>
                        
                        <label for="donated_before" class="label1">
                            <input type="radio" name="donated_before" id="donated_before">
                            Yes
                        </label>
                       
                        <label for="donated_before_no" class="label1">
                            <input type="radio" name="donated_before" id="donated_before_no">
                           No
                        </label>
                     </div>

                    <div class="input-field">
                        <label>Occupation</label>
                        <input type="text"id="occup" placeholder="Enter your occupation" required>
                    </div>
            </div>
            </div>
             <!--same div -->
            <div class="details ID">
             
             <div class="fields">
                 <div class="input-field">
                     <label>Address </label>
                     <input type="text" id="add" placeholder="Enter your Address" required>
                 </div>
 
                 <div class="input-field">
                     <label>Nationality</label>
                     <input type="text" id="nation" placeholder="Enter your Nationality" required>
                 </div>
 
                 <div class="input-field">
                     <label>State</label>
                     <input type="text" placeholder="State" id="state" required>
                 </div>
 
                 
                     <div class="input-field">
                         <label>District</label>
                         <input type="text" id="dist" placeholder="Enter your District" required>
                     </div>
 
                     <div class="input-field">
                         <label>Blood Group</label>
                         <input type="text" id="blood" placeholder="Enter your blood group" required>
                     </div>

                     <div class="yesorno">
                        <p>Do you suffer any Diseases / Allergies before?</p>
                        
                        <label for="op1" class="label1">
                            <input type="radio" name="radio" id="diseased_before" >
                            Yes
                        </label>
                        
                        <label for="op1" class="label1">
                            <input type="radio" name="radio" id="diseased_before_no">
                            No
                        </label>
                     </div>
 
                     <div class="input-field">
                         <label>Disease/Allergies Name</label>
                         <input type="text" placeholder="Enter Disease name" required id="disease_name">
                     </div>
             </div>
            
             <div class="password">
                <div class="input-field">
                    <label>Enter password</label>
                    <input type="text" placeholder="Enter password.." required id="password">
                </div>
                <div class="input-field">
                    <label>Confirm password</label>
                    <input type="text" placeholder="Enter password.." required id="cpassword">
                </div>
             </div>

             <div class="buttons">   
                          <a href="../index.html" id="back_button">Back</a>
             <button  type="submit" class="submitbtn">
                Submit
             </button>
            </div>

             
            </form>
             </div>
        </div>


        </div>

        
    </body>
    <script>
        let form =  document.querySelector("form")
        form.addEventListener("submit",submit)
        function submit(e) {
            e.preventDefault()
          const fullname = document.getElementById("fullname").value;
          const dob =document.getElementById("dob").value
          const emailid = document.getElementById("emailid").value;
          const phnum = document.getElementById("phnum").value;
          const gendermf = document.getElementById("gendermf").value;
          let donated_before = document.getElementById("donated_before")
          if (donated_before.checked) {
            donated_before= "yes"
          }
          else{
            donated_before="no"
          }
          const occupation= document.getElementById("occup").value;
          const address= document.getElementById("add").value;
          const nationality = document.getElementById("nation").value;
          const state=document.getElementById("state").value;
          const district = document.getElementById("dist").value;
          const bloodgroup = document.getElementById("blood").value;

          let diseased_before = document.getElementById("diseased_before")
          if (diseased_before.checked) {
            diseased_before= "yes"
          }
          else{
            diseased_before="no"
          }
          const disease_name =document.getElementById("disease_name").value

          let password =document.getElementById("password").value
          let cpassword =document.getElementById("cpassword").value

          if (password==cpassword) {
            let donor_details = JSON.parse(localStorage.getItem("donor_details"))?? []
            let donor_detail ={
                "fullname":fullname,
                "dob":dob,
                "emailid":emailid,
                "phnum":phnum,
                "gendermf":gendermf,
                "donated_before":donated_before,
                "occupation":occupation,
                "address":address,
                "nationality":nationality,
                "state":state,
                "district":district,
                "bloodgroup":bloodgroup,
                "diseased_before":diseased_before,
                "disease_name":disease_name,
                "password":password
            }
            donor_details.push(donor_detail)
            localStorage.setItem("donor_details",JSON.stringify(donor_details))
              window.location.href = "./login.html";

          }
          else{
            alert("password and confirm password doesn't match")
          }
    
        }
      </script>
</html>